<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>MSE Controller: os/main_SO.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">MSE Controller
   &#160;<span id="projectnumber">V7.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_8b7cb6c889a10e2a101a7e90c854ca4d.html">os</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">main_SO.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="_d_s_p2833x___device_8h_source.html">DSP2833x_Device.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="_d_s_p2833x___global_prototypes_8h_source.html">DSP2833x_GlobalPrototypes.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="main___s_o_8h_source.html">main_SO.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_o_s_config_8h_source.html">OSConfig.h</a>&quot;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for main_SO.c:</div>
<div class="dyncontent">
<div class="center"><img src="main___s_o_8c__incl.png" border="0" usemap="#os_2main___s_o_8c" alt=""/></div>
<!-- MAP 0 -->
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae9cfb073532ce9962371c5296c4c3421"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main___s_o_8c.html#ae9cfb073532ce9962371c5296c4c3421">InitSO</a> (void)</td></tr>
<tr class="memdesc:ae9cfb073532ce9962371c5296c4c3421"><td class="mdescLeft">&#160;</td><td class="mdescRight">Preemptive OS Kernel.  <a href="#ae9cfb073532ce9962371c5296c4c3421">More...</a><br /></td></tr>
<tr class="separator:ae9cfb073532ce9962371c5296c4c3421"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a650dfb551ee93c4ea285725decf04dff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main___s_o_8c.html#a650dfb551ee93c4ea285725decf04dff">OS_SLEEP</a> (<a class="el" href="_d_s_p2833x___device_8h.html#aba99025e657f892beb7ff31cecf64653">Uint32</a>)</td></tr>
<tr class="separator:a650dfb551ee93c4ea285725decf04dff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a200ce9c7c345c3777e63271dd1252c0e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main___s_o_8c.html#a200ce9c7c345c3777e63271dd1252c0e">OS_SCHEDULER</a> (void)</td></tr>
<tr class="separator:a200ce9c7c345c3777e63271dd1252c0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87ca6376ee6baae5762bd81215d95ae7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main___s_o_8c.html#a87ca6376ee6baae5762bd81215d95ae7">InitStack</a> (<a class="el" href="struct_stack_type.html">StackType</a> Stack)</td></tr>
<tr class="separator:a87ca6376ee6baae5762bd81215d95ae7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99bb928600f9951bddd589ee31963f4a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main___s_o_8c.html#a99bb928600f9951bddd589ee31963f4a">SaveContextFromISR</a> (<a class="el" href="struct_stack_type.html">StackType</a> *Stack)</td></tr>
<tr class="separator:a99bb928600f9951bddd589ee31963f4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b5935457822dd4a391fb2ecd2cfd99b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main___s_o_8c.html#a8b5935457822dd4a391fb2ecd2cfd99b">RestoreInterruptedTaskContext</a> (<a class="el" href="struct_stack_type.html">StackType</a> Stack)</td></tr>
<tr class="separator:a8b5935457822dd4a391fb2ecd2cfd99b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a124eb1ed1c421db933cbb7b445eea45d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main___s_o_8c.html#a124eb1ed1c421db933cbb7b445eea45d">SaveContextFromSleep</a> (<a class="el" href="struct_stack_type.html">StackType</a> *Stack)</td></tr>
<tr class="separator:a124eb1ed1c421db933cbb7b445eea45d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a3e7583ec4240cce4e574ae4d824281"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main___s_o_8c.html#a5a3e7583ec4240cce4e574ae4d824281">RestoreSleptTaskContext</a> (<a class="el" href="struct_stack_type.html">StackType</a> Stack)</td></tr>
<tr class="separator:a5a3e7583ec4240cce4e574ae4d824281"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e6eee2cb5b75dddeb4782c1c5e66765"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main___s_o_8c.html#a3e6eee2cb5b75dddeb4782c1c5e66765">SetAlarm</a> (unsigned long int WaitTime)</td></tr>
<tr class="separator:a3e6eee2cb5b75dddeb4782c1c5e66765"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4271bf954ac7e91f35eec23ab98b19bd"><td class="memItemLeft" align="right" valign="top">unsigned long int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main___s_o_8c.html#a4271bf954ac7e91f35eec23ab98b19bd">ElapsedTimeSinceLastScheduling</a> (void)</td></tr>
<tr class="separator:a4271bf954ac7e91f35eec23ab98b19bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0da452cbc779c9fa43ae9ee3ff555046"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main___s_o_8c.html#a0da452cbc779c9fa43ae9ee3ff555046">Sort</a> (<a class="el" href="struct_task_type.html">TaskType</a> *TaskList, unsigned int ListSize, <a class="el" href="main___s_o_8h.html#a15aeb39c8cd202f897e448b46732ffab">SortingPivot</a> Pivot)</td></tr>
<tr class="separator:a0da452cbc779c9fa43ae9ee3ff555046"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0950d135719562f192fb7fd782cd58be"><td class="memItemLeft" align="right" valign="top">interrupt void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main___s_o_8c.html#a0950d135719562f192fb7fd782cd58be">cpu_timer0_isr</a> (void)</td></tr>
<tr class="separator:a0950d135719562f192fb7fd782cd58be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac502be35364d004469bad9977e6633d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main___s_o_8c.html#ac502be35364d004469bad9977e6633d8">CheckTaskOverflow</a> (void)</td></tr>
<tr class="separator:ac502be35364d004469bad9977e6633d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56c461d51674933419dd5c23ec48bf14"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main___s_o_8c.html#a56c461d51674933419dd5c23ec48bf14">InitGpioLED</a> (void)</td></tr>
<tr class="separator:a56c461d51674933419dd5c23ec48bf14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6288eba0f8e8ad3ab1544ad731eb7667"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main___s_o_8c.html#a6288eba0f8e8ad3ab1544ad731eb7667">main</a> (void)</td></tr>
<tr class="separator:a6288eba0f8e8ad3ab1544ad731eb7667"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f150fcb40db814440fbfd0779244637"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main___s_o_8c.html#a5f150fcb40db814440fbfd0779244637">UpdateReadyTaskTime</a> (void)</td></tr>
<tr class="separator:a5f150fcb40db814440fbfd0779244637"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a59db4d8d5e4b7234f9d9eeac75e5aaaf"><td class="memItemLeft" align="right" valign="top">unsigned long int *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main___s_o_8c.html#a59db4d8d5e4b7234f9d9eeac75e5aaaf">PtrStack_Global</a></td></tr>
<tr class="separator:a59db4d8d5e4b7234f9d9eeac75e5aaaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dab4ab7913d17ed0232937b5a5af70d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_task_type.html">TaskType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main___s_o_8c.html#a0dab4ab7913d17ed0232937b5a5af70d">ReadyTasks</a> [<a class="el" href="_o_s_config_8h.html#adbf7773e48c947a9a25620dabd0b936e">NO_TASKS</a>] = <a class="el" href="_o_s_config_8h.html#aaf0eb7dd18da4e1c3153066520568c22">INIT_TASKS</a></td></tr>
<tr class="separator:a0dab4ab7913d17ed0232937b5a5af70d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abad1734a6e819e77000f0b13f47824fc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_task_type.html">TaskType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main___s_o_8c.html#abad1734a6e819e77000f0b13f47824fc">ActiveTask</a></td></tr>
<tr class="separator:abad1734a6e819e77000f0b13f47824fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed98e63aa059d404062c74d77775fc3b"><td class="memItemLeft" align="right" valign="top">unsigned long int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main___s_o_8c.html#aed98e63aa059d404062c74d77775fc3b">NextSchedulingDelay</a></td></tr>
<tr class="separator:aed98e63aa059d404062c74d77775fc3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ac502be35364d004469bad9977e6633d8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CheckTaskOverflow </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Añadir descripcion de la funcion </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
<p>Stop program here and wait for a watchdog reset</p>
<p>Stack is within allowed limits</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main___s_o_8c_ac502be35364d004469bad9977e6633d8_icgraph.png" border="0" usemap="#main___s_o_8c_ac502be35364d004469bad9977e6633d8_icgraph" alt=""/></div>
<!-- MAP 1 -->
</div>
</p>

</div>
</div>
<a class="anchor" id="a0950d135719562f192fb7fd782cd58be"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">interrupt void cpu_timer0_isr </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Añadir descripcion de la interrupcion </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
<p>Acknowledge this interrupt to receive more interrupts from group 1</p>
<p>save context of task in execution</p>
<p>Notify that ActiveTask was interrupted</p>
<p>move ActiveTask to the ReadyTask list</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main___s_o_8c_a0950d135719562f192fb7fd782cd58be_cgraph.png" border="0" usemap="#main___s_o_8c_a0950d135719562f192fb7fd782cd58be_cgraph" alt=""/></div>
<!-- MAP 2 -->
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main___s_o_8c_a0950d135719562f192fb7fd782cd58be_icgraph.png" border="0" usemap="#main___s_o_8c_a0950d135719562f192fb7fd782cd58be_icgraph" alt=""/></div>
<!-- MAP 3 -->
</div>
</p>

</div>
</div>
<a class="anchor" id="a4271bf954ac7e91f35eec23ab98b19bd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long int ElapsedTimeSinceLastScheduling </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Añadir descripcion de la funcion </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>unsigned long int </dd></dl>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main___s_o_8c_a4271bf954ac7e91f35eec23ab98b19bd_icgraph.png" border="0" usemap="#main___s_o_8c_a4271bf954ac7e91f35eec23ab98b19bd_icgraph" alt=""/></div>
<!-- MAP 4 -->
</div>
</p>

</div>
</div>
<a class="anchor" id="a56c461d51674933419dd5c23ec48bf14"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void InitGpioLED </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Añadir descripcion de la funcion </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
<p>Paso 0: Por seguridad, se inicializan todos los puertos como GPIO</p>
<p>All GPIO</p>
<p>All GPIO</p>
<p>Paso 2: Habilitar/Deshabilitar Pull-up</p>
<p>LED 1</p>
<p>LED 2</p>
<p>Paso 3: Seleccionar Cualificacion de la entrada Para usar default (SYSCLKOUT) lo dejamos sin modificar</p>
<p>Paso 4: Seleccionar funcion del puerto En el paso 0 se establecieron todos los puertos como GPIO, modificar solo en caso de tener otra funcion Paso 5: Sentido del puerto (1=Out, 0=In)</p>
<p>Los GPIO 31 y 34 los podemos visualizar en la Control Card</p>
<p>Paso 6: Seleccionar si el puerto despierta al CPU de HALT o del modo de bajo consumo Si no lo hace despertar se omite Paso 7: Seleccionar si el puerto puerto estara configurado como interrupcion externa Si no se configurara como interrupcion se omite</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main___s_o_8c_a56c461d51674933419dd5c23ec48bf14_icgraph.png" border="0" usemap="#main___s_o_8c_a56c461d51674933419dd5c23ec48bf14_icgraph" alt=""/></div>
<!-- MAP 5 -->
</div>
</p>

</div>
</div>
<a class="anchor" id="ae9cfb073532ce9962371c5296c4c3421"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void InitSO </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Preemptive OS Kernel. </p>
<p>OS-Kernel based on the pre-emptive kernel provided in the Embedded Systems course. </p><dl class="section author"><dt>Author</dt><dd>Jalil Chavez </dd>
<dd>
Jose Pesado </dd></dl>
<dl class="section version"><dt>Version</dt><dd>4.5 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2015 </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>Configure the tasks in application file MSECConfig.h. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Tested and released for TI C2000 F28335. </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>GNU Public License.&lt; DSP2833x Headerfile Include File</dd></dl>
<p>Añadir descripcion de la funcion </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
<p>invalidate ActiveTask descriptor</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main___s_o_8c_ae9cfb073532ce9962371c5296c4c3421_cgraph.png" border="0" usemap="#main___s_o_8c_ae9cfb073532ce9962371c5296c4c3421_cgraph" alt=""/></div>
<!-- MAP 6 -->
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main___s_o_8c_ae9cfb073532ce9962371c5296c4c3421_icgraph.png" border="0" usemap="#main___s_o_8c_ae9cfb073532ce9962371c5296c4c3421_icgraph" alt=""/></div>
<!-- MAP 7 -->
</div>
</p>

</div>
</div>
<a class="anchor" id="a87ca6376ee6baae5762bd81215d95ae7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void InitStack </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_stack_type.html">StackType</a>&#160;</td>
          <td class="paramname"><em>Stack</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Añadir descripcion de la funcion </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname"><a class="el" href="struct_stack_type.html">StackType</a></td><td>Stack </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main___s_o_8c_a87ca6376ee6baae5762bd81215d95ae7_icgraph.png" border="0" usemap="#main___s_o_8c_a87ca6376ee6baae5762bd81215d95ae7_icgraph" alt=""/></div>
<!-- MAP 8 -->
</div>
</p>

</div>
</div>
<a class="anchor" id="a6288eba0f8e8ad3ab1544ad731eb7667"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Añadir descripcion de la funcion </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main___s_o_8c_a6288eba0f8e8ad3ab1544ad731eb7667_cgraph.png" border="0" usemap="#main___s_o_8c_a6288eba0f8e8ad3ab1544ad731eb7667_cgraph" alt=""/></div>
<!-- MAP 9 -->
</div>
</p>

</div>
</div>
<a class="anchor" id="a200ce9c7c345c3777e63271dd1252c0e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OS_SCHEDULER </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Añadir descripcion de la funcion </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
<p>disable global interrupts, the scheduler routine is non-preemptive</p>
<p>Restore context of scheduler, the global stack</p>
<p>sort Ready tasks by WaitTime</p>
<p>Check integrity of task stacks</p>
<p>find and sort by Priority group of tasks of same WaitTime</p>
<p>search for tasks with same WaitTime</p>
<p>another group starts at j-th task, break the search</p>
<p>j-th task is from the same group as task i</p>
<p>sort group of tasks by Priority</p>
<p>find next group of tasks</p>
<p>the first task in the list is the shortest wait time and higher priority</p>
<p>it's time to activate task</p>
<p>find the next higher priority task (0 is the highest priority)</p>
<p>the scheduler shall be executed again in ReadyTasks[i].WaitTime</p>
<p>there is no task with higher priority than the task about to be activated the scheduler will be called whenever the coming task finishes</p>
<p>the scheduler shall be called again in NextTask.WaitTime</p>
<p>Remove task to be activated from the ReadyTasks list</p>
<p>Restore context of task to be executed (interrupts are enabled just before jumping to the interrupted task)</p>
<p>Scheduler was called from OS_SLEEP function</p>
<p>Scheduler was called from interrupt routine</p>
<p>Task is ready to run</p>
<p>Invalid caller</p>
<p>set a timer to delay activation of the task</p>
<p>now the interrupts are enabled</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main___s_o_8c_a200ce9c7c345c3777e63271dd1252c0e_cgraph.png" border="0" usemap="#main___s_o_8c_a200ce9c7c345c3777e63271dd1252c0e_cgraph" alt=""/></div>
<!-- MAP 10 -->
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main___s_o_8c_a200ce9c7c345c3777e63271dd1252c0e_icgraph.png" border="0" usemap="#main___s_o_8c_a200ce9c7c345c3777e63271dd1252c0e_icgraph" alt=""/></div>
<!-- MAP 11 -->
</div>
</p>

</div>
</div>
<a class="anchor" id="a650dfb551ee93c4ea285725decf04dff"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OS_SLEEP </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_d_s_p2833x___device_8h.html#aba99025e657f892beb7ff31cecf64653">Uint32</a>&#160;</td>
          <td class="paramname"><em>HiloSleepTime</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Añadir descripcion de la funcion </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Uint32</td><td>HiloSleepTime </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
<p>we are not interested in keeping in the stack the argument to the jump to OS_SLEEP</p>
<p>ActiveTask was self-preempted context is saved into the current task Stack starting at Stack.StackPointer the stack increase in direction of Stack.StackTop but never beyond</p>
<p>Notify that ActiveTask was sent to sleep</p>
<p>move ActiveTask to the ReadyTask list</p>
<p>Invalidate task</p>
<p>jump to the scheduler</p>
<p>SP = RPC SP has now the address of the caller of OS_SLEEP, however we don't care about this address since we will load SP with the address of the system stack RPC = PC + 2 RPC is loaded with the address of OS_SLEEP, but we are not interested to return to this point PC = _OS_SCHEDULER _OS_SCHEDULER is the new value of PC</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main___s_o_8c_a650dfb551ee93c4ea285725decf04dff_icgraph.png" border="0" usemap="#main___s_o_8c_a650dfb551ee93c4ea285725decf04dff_icgraph" alt=""/></div>
<!-- MAP 12 -->
</div>
</p>

</div>
</div>
<a class="anchor" id="a8b5935457822dd4a391fb2ecd2cfd99b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RestoreInterruptedTaskContext </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_stack_type.html">StackType</a>&#160;</td>
          <td class="paramname"><em>Stack</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Añadir descripcion de la funcion </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname"><a class="el" href="struct_stack_type.html">StackType</a></td><td>Stack </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
<p>context is restored from Stack.StackPointer IRET instruction is used in order to take advantage of the context stored at interruption point</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main___s_o_8c_a8b5935457822dd4a391fb2ecd2cfd99b_icgraph.png" border="0" usemap="#main___s_o_8c_a8b5935457822dd4a391fb2ecd2cfd99b_icgraph" alt=""/></div>
<!-- MAP 13 -->
</div>
</p>

</div>
</div>
<a class="anchor" id="a5a3e7583ec4240cce4e574ae4d824281"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RestoreSleptTaskContext </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_stack_type.html">StackType</a>&#160;</td>
          <td class="paramname"><em>Stack</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Añadir descripcion de la funcion </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname"><a class="el" href="struct_stack_type.html">StackType</a></td><td>Stack </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
<p>context is restored from Stack starting at Stack.StackPointer the stack decrease in direction of Stack.StackBottom but never below</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main___s_o_8c_a5a3e7583ec4240cce4e574ae4d824281_icgraph.png" border="0" usemap="#main___s_o_8c_a5a3e7583ec4240cce4e574ae4d824281_icgraph" alt=""/></div>
<!-- MAP 14 -->
</div>
</p>

</div>
</div>
<a class="anchor" id="a99bb928600f9951bddd589ee31963f4a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SaveContextFromISR </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_stack_type.html">StackType</a> *&#160;</td>
          <td class="paramname"><em>Stack</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Añadir descripcion de la funcion </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname"><a class="el" href="struct_stack_type.html">StackType</a></td><td>* Stack </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
<p>current context is saved in Stack starting at Stack.StackPointer the stack grows in direction of Stack.StackTop but never beyond</p>

</div>
</div>
<a class="anchor" id="a124eb1ed1c421db933cbb7b445eea45d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SaveContextFromSleep </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_stack_type.html">StackType</a> *&#160;</td>
          <td class="paramname"><em>Stack</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Añadir descripcion de la funcion </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname"><a class="el" href="struct_stack_type.html">StackType</a></td><td>* Stack </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
<p>current context is saved in Stack starting at Stack.StackPointer the stack grows in direction of Stack.StackTop but never beyond as interrupt did not ocurr, it is necessary to save context manually</p>

</div>
</div>
<a class="anchor" id="a3e6eee2cb5b75dddeb4782c1c5e66765"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SetAlarm </td>
          <td>(</td>
          <td class="paramtype">unsigned long int&#160;</td>
          <td class="paramname"><em>WaitTime</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Añadir descripcion de la funcion </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">unsigned</td><td>long int WaitTime </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
<p>Use write-only instruction to set TSS bit = 0 </p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main___s_o_8c_a3e6eee2cb5b75dddeb4782c1c5e66765_cgraph.png" border="0" usemap="#main___s_o_8c_a3e6eee2cb5b75dddeb4782c1c5e66765_cgraph" alt=""/></div>
<!-- MAP 15 -->
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main___s_o_8c_a3e6eee2cb5b75dddeb4782c1c5e66765_icgraph.png" border="0" usemap="#main___s_o_8c_a3e6eee2cb5b75dddeb4782c1c5e66765_icgraph" alt=""/></div>
<!-- MAP 16 -->
</div>
</p>

</div>
</div>
<a class="anchor" id="a0da452cbc779c9fa43ae9ee3ff555046"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Sort </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_task_type.html">TaskType</a> *&#160;</td>
          <td class="paramname"><em>TaskList</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>ListSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="main___s_o_8h.html#a15aeb39c8cd202f897e448b46732ffab">SortingPivot</a>&#160;</td>
          <td class="paramname"><em>Pivot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Añadir descripcion de la funcion </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname"><a class="el" href="struct_task_type.html">TaskType</a></td><td>* TaskList, unsigned int ListSize, SortingPivot Pivot </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int </dd></dl>
<p>Bubble sort</p>
<p>swap position of Current and Next</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main___s_o_8c_a0da452cbc779c9fa43ae9ee3ff555046_icgraph.png" border="0" usemap="#main___s_o_8c_a0da452cbc779c9fa43ae9ee3ff555046_icgraph" alt=""/></div>
<!-- MAP 17 -->
</div>
</p>

</div>
</div>
<a class="anchor" id="a5f150fcb40db814440fbfd0779244637"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void UpdateReadyTaskTime </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Añadir descripcion de la funcion </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
<p>Update the wait time of all the ready tasks</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main___s_o_8c_a5f150fcb40db814440fbfd0779244637_cgraph.png" border="0" usemap="#main___s_o_8c_a5f150fcb40db814440fbfd0779244637_cgraph" alt=""/></div>
<!-- MAP 18 -->
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main___s_o_8c_a5f150fcb40db814440fbfd0779244637_icgraph.png" border="0" usemap="#main___s_o_8c_a5f150fcb40db814440fbfd0779244637_icgraph" alt=""/></div>
<!-- MAP 19 -->
</div>
</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="abad1734a6e819e77000f0b13f47824fc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_task_type.html">TaskType</a> ActiveTask</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>collection of tasks ready to be executed </p>

</div>
</div>
<a class="anchor" id="aed98e63aa059d404062c74d77775fc3b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long int NextSchedulingDelay</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>task currently in execution </p>

</div>
</div>
<a class="anchor" id="a59db4d8d5e4b7234f9d9eeac75e5aaaf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long int* PtrStack_Global</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a0dab4ab7913d17ed0232937b5a5af70d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_task_type.html">TaskType</a> ReadyTasks[<a class="el" href="_o_s_config_8h.html#adbf7773e48c947a9a25620dabd0b936e">NO_TASKS</a>] = <a class="el" href="_o_s_config_8h.html#aaf0eb7dd18da4e1c3153066520568c22">INIT_TASKS</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>El Ptr stack del stack del SO </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat May 16 2015 06:33:04 for MSE Controller by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
